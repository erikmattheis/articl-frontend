import{s as p,e as m}from"./Bra6A4mU.js";import{a as i,b as d}from"./Dr10A1eW.js";function v(){const{refreshSession:r}=i(),{accessTokenValue:u}=p(i()),o=m(),l=401,h=403,f=429;let e="";window.location.hostname==="192.168.1.130"||window.location.hostname==="localhost"?e="http://localhost:5000/v1":window.location.hostname.startsWith("articl-frontend-dev")?e="https://articl-backend-dev-7be73ad044f7.herokuapp.com/v1":(window.location.hostname.startsWith("articl-frontend")||window.location.hostname==="articl.net")&&(e="https://articl-backend-ffc51a8e3a09.herokuapp.com/v1");const t=d.create({baseURL:e,headers:{Authorization:`Bearer ${u.value}`}});return t.interceptors.response.use(s=>s,async s=>{var n,a,c;return((n=s.response)==null?void 0:n.status)===h?o.push({name:"404"}):((a=s.response)==null?void 0:a.status)===f?Promise.reject(s):((c=s.response)==null?void 0:c.status)===l&&!s.config.url.includes("/auth/refresh-tokens")?await r()?t.request(s.config):o.push({name:"login"}):Promise.reject(s)}),t}export{v as u};

import{_ as P,r,n as S,o as m,c as v,a as n,b as p,E as R,i as D,u as H,e as se,g as te,d as K,j as M,l as z,h as s,w as N,G as ne,m as k,t as q,s as G,H as oe,I as j,F as ae,J as re}from"./BI3g6Nse.js";import{u as de}from"./Dl_VRi8j.js";import{u as le}from"./CdQJ6MTo.js";import{_ as ue}from"./BMxoBEdz.js";import{u as ie}from"./BIpB9Dxh.js";import{u as ce}from"./CYNUyvXa.js";import{u as me}from"./Dm8wt0xE.js";import"./DJrrQnU0.js";const pe={class:"row-admin-box"},Ae={role:"button",class:"handle",href:"#"},ve={__name:"QuestionAndAnswerActions",props:{id:{type:String,default:""},answer:{type:String,default:""},correct:{type:Boolean,default:!1},lastAnswer:{type:Boolean,default:!1}},emits:["delete-answer"],setup(_,{emit:Q}){r(!1);const e=Q,A=i=>{e("delete-answer",i)};return(i,o)=>{const c=S("vue-feather");return m(),v("div",pe,[n("a",{role:"button",tabindex:"0",onClick:o[0]||(o[0]=d=>A(_.id)),onKeyup:o[1]||(o[1]=R(d=>A(_.id),["enter"]))},[o[4]||(o[4]=n("div",{class:"sr"},"Delete answer",-1)),p(c,{size:"0.7rem",type:"delete","aria-label":"Delete answer"})],32),n("a",Ae,[o[5]||(o[5]=n("div",{class:"sr"},"Reorder answer",-1)),p(c,{size:"0.7rem",type:"move","aria-label":"Drag to reorder"})]),_.lastAnswer?(m(),v("a",{key:0,role:"button",tabindex:"0",onClick:o[2]||(o[2]=d=>A(_.id)),onKeyup:o[3]||(o[3]=R(d=>A(_.id),["enter"]))},[o[6]||(o[6]=n("div",{class:"sr"},"Delete answer",-1)),p(c,{size:"0.7rem",type:"delete","aria-label":"Delete answer"})],32)):D("",!0)])}}},_e=P(ve,[["__scopeId","data-v-e7063ccd"]]),fe={for:"question"},we={class:"grid grid-answer"},be=["for"],Qe=["id","onUpdate:modelValue","name"],ye=["for"],ge=["id","onUpdate:modelValue","name"],$e=["onClick","onKeyup"],ke={class:"grid"},he={class:"grid-right"},xe=["aria-busy"],Ce=["aria-disabled","aria-busy"],Ve={__name:"QuestionAndAnswerForm",props:{passedQandAs:{type:Object,default:()=>({QAndAs:"",answers:[{id:null,answer:"",correct:!1},{id:null,answer:"",correct:!1}]})}},emits:["QandAs-updated"],setup(_,{emit:Q}){const e=r({}),A=r(!1),i=r(!1),o=r(!1),c=r(!1),d=r(""),w=r(""),F=r(""),U=r(""),h=r(""),x=de(),B=H(),T=se(),I=le(),{setError:b}=I,O=_,E=Q;te(()=>{var a;e.value=O.passedQandAs,(a=e.value)!=null&&a.id?(w.value=e.value.question,U.value=e.value.question,i.value="Edit"):i.value="Create"});const y=()=>{e.value.answers.push({answer:"",correct:!1})},g=a=>{e.value.answers.splice(a,1)},C=()=>{d.value=""},J=()=>{C();let a=!0;return w.value===""&&(d.value="Please enter the text of the QandAs.",a=!1),a},Y=async()=>{var L,V,l;let a="/QandAs/";const t=(L=e.value)==null?void 0:L.id,$={question:w.value,answers:F.value};t?a=`/QandAs/${t}`:$.slug=B.params.slug;try{if(C(),J()){c.value=!0;const u=(V=e.value)!=null&&V.id?"PATCH":"POST",f=await x({method:u,url:a,data:$}),Ee=(l=e.value)!=null&&l.id?"PATCH":"POST";o.value=!0,E("QandAs-updated",f.data),T.push("/question-and-answer")}else b(d.value)}catch(u){b(u)}},W=()=>{try{e.value.answers.forEach((a,t)=>{const $=a;$.order=t})}catch(a){b(a)}},X=async()=>{try{const a=e.value.answers.map(t=>({id:t.id,order:t.order}));Z(a)}catch(a){b(a)}},Z=async a=>{A.value=!0;const t=await x({method:"POST",url:"/answers/order",data:{order:a}});return A.value=!1,t.data},ee=()=>{W(h.value),X(h.value)};return(a,t)=>{var V;const $=_e,L=S("draggable-items");return m(),v("form",null,[n("label",fe,[t[5]||(t[5]=K("Question ")),M(n("textarea",{id:"question","onUpdate:modelValue":t[0]||(t[0]=l=>s(e).question=l),name:"question"},null,512),[[z,s(e).question]])]),p(L,{modelValue:s(e).answers,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).answers=l),tag:"li","item-key":"id",handle:".handle","ghost-class":"ghost",onChange:ee},{item:N(({element:l,index:u})=>[n("div",we,[n("label",{for:`answer${u}`},[t[6]||(t[6]=K("Answer ")),M(n("input",{type:"text",id:`answer${u}`,"onUpdate:modelValue":f=>l.answer=f,name:`answer${u}`,autocomplete:"off"},null,8,Qe),[[z,l.answer]])],8,be),n("label",{for:`nameLast${u}`},[t[7]||(t[7]=K("Correct")),t[8]||(t[8]=n("br",null,null,-1)),M(n("input",{type:"checkbox",id:`correct${u}`,"onUpdate:modelValue":f=>l.correct=f,name:`correct${u}`},null,8,ge),[[ne,l.correct]])],8,ye),p($,{onRemove:g,onAdd:y}),n("a",{role:"button",onClick:k(f=>g(u),["prevent"]),onKeyup:R(k(f=>g(u),["prevent"]),["enter"]),tabindex:"0"}," Remove Answer ",40,$e),u===s(e).answers.length-1?(m(),v("a",{key:0,role:"button",onClick:t[1]||(t[1]=k(f=>y(),["prevent"])),onKeyup:t[2]||(t[2]=R(k(f=>y(),["prevent"]),["enter"])),tabindex:"0"}," Add Answer ",32)):D("",!0)])]),_:1},8,["modelValue"]),n("div",ke,[n("div",he,[n("button",{"aria-busy":s(c),onClick:t[4]||(t[4]=k((...l)=>a.cancelForm&&a.cancelForm(...l),["prevent"]))}," Cancel ",8,xe),n("button",{"aria-disabled":s(c),"aria-busy":s(c),onClick:k(Y,["prevent"])},q((V=s(e))!=null&&V.id?"Edit":"Create")+" QandAs ",9,Ce)])])])}}},qe=P(Ve,[["__scopeId","data-v-7bd3df55"]]),Se={class:"container"},De={key:0},Fe={key:0,class:"box"},Ue={class:"row-admin-box"},Te={__name:"QuestionAndAnswerListItems",props:{passedQAndA:{type:Object,default:()=>{}}},emits:["QAndA-updated"],setup(_,{emit:Q}){const e=r({});r(!1);const A=r(!1),{isLoggedInMixin:i}=ie(),o=H(),c=ce(),{user:d}=G(c),w=oe(()=>o.name);return(F,U)=>{var I,b,O,E,y,g,C;const h=S("vue-feather"),x=ue,B=S("QAndAsForm"),T=S("QAndAsDelete");return m(),v("div",null,[n("div",Se,[n("div",null,[s(w)==="editQAndASuccess"&&((I=s(e))==null?void 0:I.id)===s(o).params.id?(m(),v("p",De,U[0]||(U[0]=[n("ins",null,"Your QAndA was successfully updated.",-1)]))):D("",!0),n("p",null,q((b=s(e))==null?void 0:b.fullText),1),n("small",null,"â€“"+q((O=s(e).author)==null?void 0:O.nameFirst)+" "+q((E=s(e).author)==null?void 0:E.nameLast)+" "+q(F.QAndADate),1)]),s(A)&&s(i)?(m(),v("div",Fe,[n("div",Ue,[p(x,{role:"button",to:{name:"editQAndA",params:{id:s(e).id}}},{default:N(()=>[p(h,{size:"0.7rem",type:"edit","aria-label":"Edit QAndA"})]),_:1},8,["to"]),p(x,{role:"button",to:{name:"deleteQAndA",params:{id:(y=s(e))==null?void 0:y.id}}},{default:N(()=>[p(h,{size:"0.7rem",type:"delete","aria-label":"Delete QAndA"})]),_:1},8,["to"])])])):D("",!0)]),s(w)==="editQAndA"&&((g=s(e))==null?void 0:g.id)===s(o).params.id&&s(d).id===s(e).author.id?(m(),j(B,{key:0,"passed-QAndA":s(e),onQAndAUpdated:F.QAndAUpdated},null,8,["passed-QAndA","onQAndAUpdated"])):s(w)==="deleteQAndA"&&((C=s(e))==null?void 0:C.id)===s(o).params.id&&s(d).id===s(e).author.id?(m(),j(T,{key:1,"passed-QAndA":s(e)},null,8,["passed-QAndA"])):D("",!0)])}}},Ie=P(Te,[["__scopeId","data-v-aacb9a3a"]]),Oe={class:"tab-content"},je={__name:"index",setup(_){const Q=me(),{QAndAs:e}=G(Q);return(A,i)=>{const o=qe,c=Ie;return m(),v("div",Oe,[i[1]||(i[1]=n("h2",null,"Q & A",-1)),n("details",null,[i[0]||(i[0]=n("summary",null,"Add Q & A",-1)),p(o)]),n("ul",null,[(m(!0),v(ae,null,re(s(e)||[],d=>(m(),v("li",{key:d.fullText},[p(c,{"passed-q-and-a":d},null,8,["passed-q-and-a"])]))),128))])])}}};export{je as default};

import{_ as $t}from"./DdNZg7At.js";import{_ as ht,r as N,u as ut,e as Dt,s as ot,g as it,o as V,c as B,a as E,j as St,l as Tt,h as i,k as Nt,b as K,w as lt,d as X,t as J,m as dt,F as ft,i as tt,K as _t,S as gt,H as wt,f as vt,n as kt,I as yt,J as Ot}from"./nWBr_nlk.js";import{u as pt}from"./CxFU-RK6.js";import{u as at}from"./BneovxEs.js";import{u as Ct}from"./CZE8wajq.js";import{u as ct}from"./BjAqP9MT.js";import{u as Lt}from"./Cw_16z2z.js";import{u as Et}from"./CeXlfWiW.js";import"./a1fnWWKB.js";const Yt={for:"fullText"},Ft={class:"grid"},Ht={class:"grid-right"},It=["aria-disabled","aria-busy","disabled"],At={__name:"ResourceNotesForm",props:{passedNote:{type:Object,default:()=>{}}},emits:["note-updated"],setup(q,{emit:F}){const a=N({}),$=N(""),L=N("");N(!1);const _=N(!1),C=N(!1),M=N(!1),x=N(""),f=ut(),D=Dt(),y=pt(),U=ct(),w=Ct(),{setError:m}=at();ot(at());const{setNote:p,addNote:T}=U,{setSuccessTitle:H,setSuccessMessage:R}=w,k=q;it(()=>{var g;a.value=k.passedNote,(g=a.value)!=null&&g.id?($.value=a.value.fullText,L.value=a.value.fullText,_.value="Edit"):_.value="Create"});const o=()=>{x.value=""},u=()=>{o();let g=!0;return $.value||(x.value="Please enter the text of the note.",g=!1),g},v=async()=>{var h,d,z,et;let g="/notes/";const S=(h=a.value)==null?void 0:h.id,A={fullText:$.value};S?g=`/notes/${S}`:A.slug=f.params.slug;try{if(o(),u()){M.value=!0;const n=(d=a.value)!=null&&d.id?"PATCH":"POST",e=await y({method:n,url:g,data:A});C.value=!0;const t=(z=a.value)!=null&&z.id?"Updated":"Created";H(`Note ${t}`),R(`The note was successfully ${t}.`),(et=a.value)!=null&&et.id?p(e.data):(T(e.data),D.push({path:"/resource/notes"}))}else m(x.value)}catch(n){m(n)}finally{M.value=!1}};return(g,S)=>{var h;const A=$t;return V(),B("form",{onSubmit:dt(v,["prevent"])},[E("label",Yt,[St(E("textarea",{id:"fullText","onUpdate:modelValue":S[0]||(S[0]=d=>Nt($)?$.value=d:null),name:"fullText",placeholder:"Enter your note here"},null,512),[[Tt,i($)]])]),E("div",Ft,[E("div",Ht,[K(A,{to:{name:"resource-slug-notes",params:{slug:i(f).params.slug}},"aria-busy":"buttonDisabled",role:"button",class:"cancel-button"},{default:lt(()=>S[1]||(S[1]=[X(" Cancel ")])),_:1},8,["to"]),E("button",{type:"submit","aria-disabled":i(M),"aria-busy":i(M),disabled:i(M)},J((h=i(a))!=null&&h.id?"Edit":"Create")+" Note ",9,It)])])],32)}}},bt=ht(At,[["__scopeId","data-v-75b3a83e"]]),Ut={key:0},jt=["aria-busy"],Rt=["aria-busy"],Vt={__name:"ResourceNotesDelete",setup(q){const F=N(!0),a=N(!1),$=N(!1),L=N(""),_=N(""),C=N(""),M=N(""),x=N(""),f=ut(),D=pt(),y=at(),U=ct(),{setError:w}=y,{removeNote:m}=U;it(()=>{L.value=f.query.id,p(L.value),x.value=f.params.slug});const p=async k=>{try{a.value=!0;const o=await T(k);o.data?(_.value=o.data.fullText,C.value=o.data.author.nameFirst,M.value=o.data.author.nameLast,F.value=!1):w("No note found.")}catch(o){w(o)}},T=async k=>D({method:"GET",url:`/notes/${k}`}),H=async()=>{try{F.value=!0,await R(L.value),$.value=!0,m(L.value),$.value=!0}catch(k){w(k)}finally{F.value=!1}},R=async k=>D({method:"DELETE",url:"/notes",data:{id:k}});return(k,o)=>{var u,v;return V(),B(ft,null,[i($)?tt("",!0):(V(),B(ft,{key:0},[E("p",null,[o[2]||(o[2]=X(" Really delete the note ")),((u=i(_))==null?void 0:u.length)>64?(V(),B("span",Ut," that begins, ")):tt("",!0),X(' "'+J((v=i(_))==null?void 0:v.substring(0,64))+'" by '+J(i(C))+" "+J(i(M))+"? ",1)]),E("form",null,[E("button",{"aria-busy":i(F),onClick:o[0]||(o[0]=dt(g=>k.$router.push({name:"resource-slug-notes",params:{slug:i(f).params.slug}}),["prevent"]))},"Cancel",8,jt),E("button",{"aria-busy":i(F),onClick:o[1]||(o[1]=dt(g=>H(),["prevent"]))},"Delete",8,Rt)])],64)),X(" id - "+J(i(L))+" - ",1)],64)}}},Wt=ht(Vt,[["__scopeId","data-v-7133a744"]]);var Mt={exports:{}};(function(q,F){(function(a,$){q.exports=$()})(_t,function(){var a=1e3,$=6e4,L=36e5,_="millisecond",C="second",M="minute",x="hour",f="day",D="week",y="month",U="quarter",w="year",m="date",p="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,H=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var e=["th","st","nd","rd"],t=n%100;return"["+n+(e[(t-20)%10]||e[t]||e[0])+"]"}},k=function(n,e,t){var r=String(n);return!r||r.length>=e?n:""+Array(e+1-r.length).join(t)+n},o={s:k,z:function(n){var e=-n.utcOffset(),t=Math.abs(e),r=Math.floor(t/60),s=t%60;return(e<=0?"+":"-")+k(r,2,"0")+":"+k(s,2,"0")},m:function n(e,t){if(e.date()<t.date())return-n(t,e);var r=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(r,y),c=t-s<0,l=e.clone().add(r+(c?-1:1),y);return+(-(r+(t-s)/(c?s-l:l-s))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:y,y:w,w:D,d:f,D:m,h:x,m:M,s:C,ms:_,Q:U}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return n===void 0}},u="en",v={};v[u]=R;var g="$isDayjsObject",S=function(n){return n instanceof z||!(!n||!n[g])},A=function n(e,t,r){var s;if(!e)return u;if(typeof e=="string"){var c=e.toLowerCase();v[c]&&(s=c),t&&(v[c]=t,s=c);var l=e.split("-");if(!s&&l.length>1)return n(l[0])}else{var b=e.name;v[b]=e,s=b}return!r&&s&&(u=s),s||!r&&u},h=function(n,e){if(S(n))return n.clone();var t=typeof e=="object"?e:{};return t.date=n,t.args=arguments,new z(t)},d=o;d.l=A,d.i=S,d.w=function(n,e){return h(n,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var z=function(){function n(t){this.$L=A(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[g]=!0}var e=n.prototype;return e.parse=function(t){this.$d=function(r){var s=r.date,c=r.utc;if(s===null)return new Date(NaN);if(d.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var l=s.match(T);if(l){var b=l[2]-1||0,O=(l[7]||"0").substring(0,3);return c?new Date(Date.UTC(l[1],b,l[3]||1,l[4]||0,l[5]||0,l[6]||0,O)):new Date(l[1],b,l[3]||1,l[4]||0,l[5]||0,l[6]||0,O)}}return new Date(s)}(t),this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return d},e.isValid=function(){return this.$d.toString()!==p},e.isSame=function(t,r){var s=h(t);return this.startOf(r)<=s&&s<=this.endOf(r)},e.isAfter=function(t,r){return h(t)<this.startOf(r)},e.isBefore=function(t,r){return this.endOf(r)<h(t)},e.$g=function(t,r,s){return d.u(t)?this[r]:this.set(s,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,r){var s=this,c=!!d.u(r)||r,l=d.p(t),b=function(G,j){var P=d.w(s.$u?Date.UTC(s.$y,j,G):new Date(s.$y,j,G),s);return c?P:P.endOf(f)},O=function(G,j){return d.w(s.toDate()[G].apply(s.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(j)),s)},Y=this.$W,I=this.$M,W=this.$D,Q="set"+(this.$u?"UTC":"");switch(l){case w:return c?b(1,0):b(31,11);case y:return c?b(1,I):b(0,I+1);case D:var Z=this.$locale().weekStart||0,st=(Y<Z?Y+7:Y)-Z;return b(c?W-st:W+(6-st),I);case f:case m:return O(Q+"Hours",0);case x:return O(Q+"Minutes",1);case M:return O(Q+"Seconds",2);case C:return O(Q+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,r){var s,c=d.p(t),l="set"+(this.$u?"UTC":""),b=(s={},s[f]=l+"Date",s[m]=l+"Date",s[y]=l+"Month",s[w]=l+"FullYear",s[x]=l+"Hours",s[M]=l+"Minutes",s[C]=l+"Seconds",s[_]=l+"Milliseconds",s)[c],O=c===f?this.$D+(r-this.$W):r;if(c===y||c===w){var Y=this.clone().set(m,1);Y.$d[b](O),Y.init(),this.$d=Y.set(m,Math.min(this.$D,Y.daysInMonth())).$d}else b&&this.$d[b](O);return this.init(),this},e.set=function(t,r){return this.clone().$set(t,r)},e.get=function(t){return this[d.p(t)]()},e.add=function(t,r){var s,c=this;t=Number(t);var l=d.p(r),b=function(I){var W=h(c);return d.w(W.date(W.date()+Math.round(I*t)),c)};if(l===y)return this.set(y,this.$M+t);if(l===w)return this.set(w,this.$y+t);if(l===f)return b(1);if(l===D)return b(7);var O=(s={},s[M]=$,s[x]=L,s[C]=a,s)[l]||1,Y=this.$d.getTime()+t*O;return d.w(Y,this)},e.subtract=function(t,r){return this.add(-1*t,r)},e.format=function(t){var r=this,s=this.$locale();if(!this.isValid())return s.invalidDate||p;var c=t||"YYYY-MM-DDTHH:mm:ssZ",l=d.z(this),b=this.$H,O=this.$m,Y=this.$M,I=s.weekdays,W=s.months,Q=s.meridiem,Z=function(j,P,rt,nt){return j&&(j[P]||j(r,c))||rt[P].slice(0,nt)},st=function(j){return d.s(b%12||12,j,"0")},G=Q||function(j,P,rt){var nt=j<12?"AM":"PM";return rt?nt.toLowerCase():nt};return c.replace(H,function(j,P){return P||function(rt){switch(rt){case"YY":return String(r.$y).slice(-2);case"YYYY":return d.s(r.$y,4,"0");case"M":return Y+1;case"MM":return d.s(Y+1,2,"0");case"MMM":return Z(s.monthsShort,Y,W,3);case"MMMM":return Z(W,Y);case"D":return r.$D;case"DD":return d.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return Z(s.weekdaysMin,r.$W,I,2);case"ddd":return Z(s.weekdaysShort,r.$W,I,3);case"dddd":return I[r.$W];case"H":return String(b);case"HH":return d.s(b,2,"0");case"h":return st(1);case"hh":return st(2);case"a":return G(b,O,!0);case"A":return G(b,O,!1);case"m":return String(O);case"mm":return d.s(O,2,"0");case"s":return String(r.$s);case"ss":return d.s(r.$s,2,"0");case"SSS":return d.s(r.$ms,3,"0");case"Z":return l}return null}(j)||l.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,r,s){var c,l=this,b=d.p(r),O=h(t),Y=(O.utcOffset()-this.utcOffset())*$,I=this-O,W=function(){return d.m(l,O)};switch(b){case w:c=W()/12;break;case y:c=W();break;case U:c=W()/3;break;case D:c=(I-Y)/6048e5;break;case f:c=(I-Y)/864e5;break;case x:c=I/L;break;case M:c=I/$;break;case C:c=I/a;break;default:c=I}return s?c:d.a(c)},e.daysInMonth=function(){return this.endOf(y).$D},e.$locale=function(){return v[this.$L]},e.locale=function(t,r){if(!t)return this.$L;var s=this.clone(),c=A(t,r,!0);return c&&(s.$L=c),s},e.clone=function(){return d.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},n}(),et=z.prototype;return h.prototype=et,[["$ms",_],["$s",C],["$m",M],["$H",x],["$W",f],["$M",y],["$y",w],["$D",m]].forEach(function(n){et[n[1]]=function(e){return this.$g(e,n[0],n[1])}}),h.extend=function(n,e){return n.$i||(n(e,z,h),n.$i=!0),h},h.locale=A,h.isDayjs=S,h.unix=function(n){return h(1e3*n)},h.en=v[u],h.Ls=v,h.p={},h})})(Mt);var qt=Mt.exports;const mt=gt(qt);var xt={exports:{}};(function(q,F){(function(a,$){q.exports=$()})(_t,function(){return function(a,$,L){a=a||{};var _=$.prototype,C={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function M(f,D,y,U){return _.fromToBase(f,D,y,U)}L.en.relativeTime=C,_.fromToBase=function(f,D,y,U,w){for(var m,p,T,H=y.$locale().relativeTime||C,R=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],k=R.length,o=0;o<k;o+=1){var u=R[o];u.d&&(m=U?L(f).diff(y,u.d,!0):y.diff(f,u.d,!0));var v=(a.rounding||Math.round)(Math.abs(m));if(T=m>0,v<=u.r||!u.r){v<=1&&o>0&&(u=R[o-1]);var g=H[u.l];w&&(v=w(""+v)),p=typeof g=="string"?g.replace("%d",v):g(v,D,u.l,T);break}}if(D)return p;var S=T?H.future:H.past;return typeof S=="function"?S(p):S.replace("%s",p)},_.to=function(f,D){return M(f,D,this,!0)},_.from=function(f,D){return M(f,D,this)};var x=function(f){return f.$u?L.utc():L()};_.toNow=function(f){return this.to(x(this),f)},_.fromNow=function(f){return this.from(x(this),f)}}})})(xt);var Bt=xt.exports;const zt=gt(Bt);mt.extend(zt);const Jt=q=>{const F=mt(q);return F.isAfter(mt().subtract(3,"day"))?F.fromNow():F.format("MMMM D, YYYY")},Pt={class:"container"},Zt={key:0},Gt={key:0,class:"box"},Kt={class:"row-admin-box"},Qt={__name:"ResourceNotesListItem",props:{passedNote:{type:Object,default:()=>{}}},emits:["note-updated"],setup(q,{emit:F}){const a=N({});N(!1);const $=N(!1),{isLoggedInMixin:L}=Lt(),_=ut(),C=Et(),M=ct(),{user:x,isLoggedIn:f}=ot(C),{notes:D}=ot(M);wt(()=>{var m;return Jt((m=a.value)==null?void 0:m.createdAt)});const y=q,U=F;it(()=>{var m,p,T,H;(m=y.passedNote)!=null&&m.id&&(a.value=y.passedNote,$.value=((T=(p=y.passedNote)==null?void 0:p.author)==null?void 0:T.id)===((H=x.value)==null?void 0:H.id))}),vt(D.value,m=>{const p=m.find(T=>T.id===passedNote.value.id);p&&(a.value=p)}),vt(y.passedNote,m=>{var p,T;a.value=m,$.value=((p=m==null?void 0:m.author)==null?void 0:p.id)===((T=x.value)==null?void 0:T.id)});const w=m=>{U("note-updated",m)};return(m,p)=>{var o,u,v,g,S,A,h;const T=kt("vue-feather"),H=$t,R=bt,k=Wt;return V(),B("div",{key:i(a).id},[E("div",Pt,[E("div",null,[i(_).name==="EditNoteSuccess"&&((o=i(a))==null?void 0:o.id)===i(_).params.id?(V(),B("p",Zt,p[0]||(p[0]=[E("ins",null,"Your note was successfully updated.",-1)]))):tt("",!0),E("p",null,J((u=i(a))==null?void 0:u.fullText),1),E("small",null,[X(" â€“"+J((v=i(a).author)==null?void 0:v.nameFirst)+" "+J((g=i(a).author)==null?void 0:g.nameLast),1),p[1]||(p[1]=E("br",null,null,-1)),X(" "+J((S=i(a))==null?void 0:S.createdAt),1)])]),i($)&&i(L)?(V(),B("div",Gt,[E("div",Kt,[K(H,{to:{name:"resource-slug-notes",query:{id:i(a).id,mode:"edit"}},role:"button"},{default:lt(()=>[K(T,{size:"0.7rem",type:"edit","aria-label":"Edit note"})]),_:1},8,["to"]),K(H,{to:{name:"resource-slug-notes",query:{id:i(a).id,mode:"delete"}},role:"button"},{default:lt(()=>[K(T,{size:"0.7rem",type:"delete","aria-label":"Delete note"})]),_:1},8,["to"])])])):tt("",!0)]),i(_).query.mode==="edit"&&((A=i(a))==null?void 0:A.id)===i(_).query.id&&i(x).id===i(a).author.id?(V(),yt(R,{key:0,"passed-note":i(a),onNoteUpdated:w},null,8,["passed-note"])):i(_).query.mode==="delete"&&((h=i(a))==null?void 0:h.id)===i(_).query.id&&i(x).id===i(a).author.id?(V(),yt(k,{key:1,"passed-note":i(a)},null,8,["passed-note"])):tt("",!0)])}}},Xt=ht(Qt,[["__scopeId","data-v-07234dc5"]]),te={class:"tab-content"},ee={key:0},de={__name:"index",setup(q){const F=N(!1),a=N(""),$=N(""),L=at(),_=ct(),{notes:C}=ot(_),{setCategories:M,setBreadcrumbs:x,setArticls:f,setNotes:D,setSlug:y,setArticlType:U,setHtmlTitle:w}=_,{setError:m}=L,p=ut(),T=pt();it(()=>{H(p.params.slug),y(p.params.slug),U(p.params.articlType)});const H=async o=>{try{F.value=!0;const u=await R(o);k(u)}catch(u){m(u)}finally{F.value=!1}},R=async o=>{const u=await T({method:"GET",url:`/resource/${o||""}`}),v=u.articls?Object.keys(u.data.articls):[];return{breadcrumbs:u.data.breadcrumbs,categories:u.data.categories,category:u.data.category,articlTypes:v,articls:u.data.articls,notes:u.data.notes}},k=async o=>{var u,v,g,S,A,h,d;try{(u=o.categories)!=null&&u.length?M(o.categories):M([]),(v=o.breadcrumbs)!=null&&v.length?x(o.breadcrumbs):x([]),(g=o.articls)!=null&&g.length?f(o.articls):f([]),(S=o.notes)!=null&&S.length?D(o.notes):D([]),a.value=(A=o.category[0])==null?void 0:A.title,$.value=(h=o.category[0])==null?void 0:h.titleHtml;const z=(d=o.category[0])==null?void 0:d.description;w($.value)}catch(z){m(z)}};return(o,u)=>{const v=bt,g=Xt;return V(),B("div",te,[u[1]||(u[1]=E("h2",null,"Notes",-1)),E("details",null,[u[0]||(u[0]=E("summary",null,"Add Note",-1)),K(v)]),i(C)&&i(C).length?(V(),B("ul",ee,[(V(!0),B(ft,null,Ot(i(C),S=>(V(),B("li",null,[K(g,{passedNote:S,onNoteUpdated:o.noteUpdated},null,8,["passedNote","onNoteUpdated"])]))),256))])):tt("",!0)])}}};export{de as default};

import{_ as E}from"./CTOhJBAM.js";import{r as t,u as U,e as D,f as F,g as R,c as l,a,h as e,d as i,i as x,j as g,v as b,k as y,b as h,l as $,m as j,w as q,n as A,o as u}from"./CZZvAiAY.js";import{u as H}from"./CUy4Dzmh.js";import{u as L}from"./BVRFDUUq.js";import{s as O}from"./Cr4rKpff.js";const Y={key:0},z={for:"newPassword"},G={key:0,class:"lighter left-space"},I={key:1,class:"lighter left-space"},J={class:"toggle-password"},K=["type"],Q={for:"newPassword2"},W={class:"toggle-password"},X=["type"],Z=["aria-busy"],ss={key:0},es={key:1,class:"valid"},us={__name:"change-password-email",setup(os){const r=t(""),d=t(""),m=t("password"),c=t("password"),p=t(!1),_=t(0),w=t(""),v=t(!1),f=t(""),C=U();D();const T=H(),V=L(),{setError:k}=V;F(r,o=>{_.value=O(o)}),R(()=>{});const M=()=>{let o=!0;return r.value.length<8?(w.value="Passwords are at least eight characters.",o=!1):r.value!==d.value&&(w.value="Passwords do not match.",o=!1),o},N=()=>{v.value=!1,w.value=""},S=async()=>{try{if(N(),M()){p.value=!0;const o=await T({method:"POST",url:"/auth/change-password-email",data:{token:C.query.token,password:r.value,password2:d.value}});v.value=!0}else k(w.value)}catch(o){k(o)}finally{p.value=!1}};return(o,s)=>{const P=E,B=A("router-link");return u(),l("article",null,[s[11]||(s[11]=a("h1",null,"Change Password",-1)),e(v)?(u(),l("p",es,[s[9]||(s[9]=i(" You have successfully changed your password. Please ")),h(B,{to:{name:"LoginPage"}},{default:q(()=>s[8]||(s[8]=[i("sign in with your new password")])),_:1}),s[10]||(s[10]=i(". "))])):(u(),l("form",Y,[a("label",z,[s[6]||(s[6]=i("New password ")),e(_)<3?(u(),l("small",G," Use upper- and lowercase, numerical and special characters. ")):e(r).length<8?(u(),l("small",I," Please use 8 or more characters. ")):x("",!0),a("div",J,[g(a("input",{id:"newPassword","onUpdate:modelValue":s[0]||(s[0]=n=>y(r)?r.value=n:null),type:e(m),autocomplete:"new-password"},null,8,K),[[b,e(r)]]),h(P,{class:"toggle-password-mask",onShow:s[1]||(s[1]=n=>m.value=e(m)==="text"?"password":"text")})])]),a("label",Q,[s[7]||(s[7]=i("Confirm new password ")),a("div",W,[g(a("input",{id:"newPassword2","onUpdate:modelValue":s[2]||(s[2]=n=>y(d)?d.value=n:null),type:e(c),autocomplete:"new-password"},null,8,X),[[b,e(d)]]),h(P,{class:"toggle-password-mask",onShow:s[3]||(s[3]=n=>c.value=e(c)==="text"?"password":"text")})])]),g(a("input",{type:"hidden",name:"username","onUpdate:modelValue":s[4]||(s[4]=n=>y(f)?f.value=n:null)},null,512),[[$,e(f)]]),a("button",{id:"reset",type:"submit","aria-busy":e(p),onClick:s[5]||(s[5]=j(n=>S(),["prevent"]))},[e(p)?x("",!0):(u(),l("span",ss,"Change Password"))],8,Z)]))])}}};export{us as default};

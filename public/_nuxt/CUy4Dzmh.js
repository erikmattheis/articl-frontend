import{s as p,e as m}from"./CZZvAiAY.js";import{a as u,b as T}from"./BVRFDUUq.js";function w(){const{refreshSession:i}=u(),{accessTokenValue:r}=p(u()),o=m(),f=401,l=403,h=429;let e="";window.location.hostname==="192.168.1.130"||window.location.hostname==="localhost"?e="http://localhost:5000/v1":e="https://articl-backend-ffc51a8e3a09.herokuapp.com/v1";const t=T.create({baseURL:e,headers:{Authorization:`Bearer ${r.value}`}});return t.interceptors.response.use(s=>s,async s=>{var n,a,c;return((n=s.response)==null?void 0:n.status)===l?o.push({name:"404"}):((a=s.response)==null?void 0:a.status)===h?Promise.reject(s):((c=s.response)==null?void 0:c.status)===f&&!s.config.url.includes("/auth/refresh-tokens")?await i()?t.request(s.config):o.push({name:"login"}):Promise.reject(s)}),t}export{w as u};

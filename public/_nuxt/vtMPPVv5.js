import{r as l,c as i,a as n,d as k,j as x,l as E,h as t,k as w,m as F,t as M,i as N,o as u}from"./BI3g6Nse.js";import{u as T}from"./Dl_VRi8j.js";import{v as V}from"./DJrrQnU0.js";import{u as B}from"./CdQJ6MTo.js";import{u as D}from"./CpJUWWxd.js";const I={for:"email"},P=["aria-busy","disabled"],U={key:0},j={key:1},A={key:0},J={__name:"forgot-username",setup(C){const s=l(null),f=l(null),d=l(""),o=l(!1),r=l(null),v=T(),p=B(),h=D(),{setError:c}=p,{setSuccessTitle:b,setSuccessMessage:_}=h,y=()=>{f.value=null,r.value=null},S=()=>!s.value||!V(s.value)?(d.value="Please enter a valid email address",!1):!0,g=async()=>{var m,a;try{if(y(),S()){o.value=!0;const e=await v({method:"POST",url:"/auth/forgot-username",data:{email:s.value}});b("Email sent"),_("If a username is associated with the email provided, an email has been dispatched."),(m=e==null?void 0:e.data)!=null&&m.message?r.value=(a=e==null?void 0:e.data)==null?void 0:a.message:r.value=e==null?void 0:e.response}else c(d.value)}catch(e){c(e)}finally{o.value=!1}};return(m,a)=>(u(),i("article",null,[a[2]||(a[2]=n("h1",null,"Forgot Username",-1)),n("form",{onSubmit:F(g,["prevent"])},[n("label",I,[a[1]||(a[1]=k("Email ")),x(n("input",{id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>w(s)?s.value=e:null),name:"email",type:"email",autocomplete:"email"},null,512),[[E,t(s)]])]),n("button",{id:"reset",type:"submit","aria-busy":t(o),disabled:t(o)},[t(o)?(u(),i("span",j,"Sending...")):(u(),i("span",U,"Send email with username"))],8,P)],32),t(r)?(u(),i("p",A,M(t(r)),1)):N("",!0)]))}};export{J as default};

import{_ as w,r as a,u as B,g as R,h as s,c as _,a as r,d as b,i as h,t as i,m as g,F as V,o as N}from"./Bra6A4mU.js";import{u as M}from"./CfjJ7iNU.js";import{u as A}from"./Dr10A1eW.js";import{u as G}from"./By-zEHk8.js";const I={key:0},$=["aria-busy"],j=["aria-busy"],q={__name:"[id]",setup(z){const o=a(!0),n=a(!1),d=a(!1),u=a(""),l=a(""),m=a(""),f=a(""),p=M(),D=B(),E=A(),k=G(),{setError:c}=E,{removeNote:x}=k;R(()=>{u.value=D.params.id,C(u.value)});const C=async t=>{try{d.value=!0;const e=await S(t);e.data?(l.value=e.data.fullText,m.value=e.data.author.nameFirst,f.value=e.data.author.nameLast,o.value=!1):c("No note found."),d.value=!1}catch(e){c(e)}},S=async t=>p({method:"GET",url:`/notes/${t}`}),T=async()=>{try{o.value=!0,await F(),n.value=!0,x(u.value),n.value=!0}catch(t){c(t)}},F=async t=>p({method:"DELETE",url:"/notes",data:{id:t}});return(t,e)=>{var v,y;return s(n)?h("",!0):(N(),_(V,{key:0},[r("p",null,[e[1]||(e[1]=b(" Really delete the note ")),((v=s(l))==null?void 0:v.length)>64?(N(),_("span",I," that begins, ")):h("",!0),b(' "'+i((y=s(l))==null?void 0:y.substring(0,64))+'" by '+i(s(m))+" "+i(s(f))+"? ",1)]),r("form",null,[r("button",{"aria-busy":s(o),onClick:e[0]||(e[0]=g((...L)=>t.cancelDeletion&&t.cancelDeletion(...L),["prevent"]))}," Cancel ",8,$),r("button",{"aria-busy":s(o),onClick:g(T,["prevent"])}," Delete ",8,j)])],64))}}},P=w(q,[["__scopeId","data-v-ba4bfc36"]]);export{P as default};

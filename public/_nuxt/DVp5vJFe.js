import{_ as h}from"./BdC-M82k.js";import{_ as D}from"./BMxoBEdz.js";import{r as o,e as F,s as M,p as P,c as p,a as t,h as s,t as A,i as H,d as n,j as x,l as I,k as S,v as $,b as f,m as j,w as _,o as v,q as T,x as q}from"./BI3g6Nse.js";import{u as G}from"./CgjTvw7N.js";import{u as J}from"./CdQJ6MTo.js";import{u as K}from"./CYNUyvXa.js";import"./DJrrQnU0.js";const O={key:0,class:"error invalid"},Q={for:"username"},W={for:"password"},X={class:"toggle-password"},Y=["type"],Z=["aria-busy","disabled"],ee={key:0},se={key:1},de={__name:"login",setup(oe){G({title:"Articl  Login"});const u=o(null);o(null);const i=o(null);o(null),o(!1);const d=o(!1),c=o("password"),g=o(""),y=K(),C=J();F();const{clearLogInError:b,login:E}=y,{logInError:k,user:w}=M(y),{setError:L}=C;P(()=>{b()});const N=()=>{g.value="",b()},V=()=>{let r=!0;return u.value||(g.value="Please enter your username.",r=!1),i.value||(g.value="Please enter your password.",r=!1),r},z=async()=>{var r,e,m;try{if(V()){if(d.value=!0,!await E({username:u.value,password:i.value}))return!1;N();const a=((r=w.value)==null?void 0:r.theme)!=="dark"?"light":"dark",B=(e=w.value)!=null&&e.fontSize?(m=w.value)==null?void 0:m.fontSize:16;document.documentElement.setAttribute("data-theme",a);const R=T("data-theme"),U=T("font-size");R.value=a,U.value=B,q("/")}}catch(l){L(l)}finally{d.value=!1}};return(r,e)=>{const m=h,l=D;return v(),p("article",null,[e[8]||(e[8]=t("h1",null,"Log in",-1)),t("form",{onSubmit:j(z,["prevent"])},[s(k)?(v(),p("p",O,A(s(k)),1)):H("",!0),t("label",Q,[e[3]||(e[3]=n("User Name ")),x(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>S(u)?u.value=a:null),name:"username",type:"text",autocomplete:"username"},null,512),[[I,s(u)]])]),t("label",W,[e[4]||(e[4]=n("Password ")),t("div",X,[x(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>S(i)?i.value=a:null),name:"password",type:s(c),autocomplete:"current-password"},null,8,Y),[[$,s(i)]]),f(m,{class:"toggle-password-mask",onShow:e[2]||(e[2]=a=>c.value=s(c)==="text"?"password":"text")})])]),t("button",{id:"Login","aria-busy":s(d),disabled:s(d),type:"submit"},[s(d)?(v(),p("span",se,"Loading...")):(v(),p("span",ee,"Login"))],8,Z)],32),e[9]||(e[9]=n(" Forgot ")),f(l,{to:"/send-change-password-email"},{default:_(()=>e[5]||(e[5]=[n("password")])),_:1}),e[10]||(e[10]=n(" or ")),f(l,{to:"/forgot-username"},{default:_(()=>e[6]||(e[6]=[n("username")])),_:1}),f(l,{to:"/users",class:"right"},{default:_(()=>e[7]||(e[7]=[n("Create account")])),_:1})])}}};export{de as default};
